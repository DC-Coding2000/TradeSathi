<!doctype html>
<html><head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="/static/style.css">
  <title>Mock Escrow</title>
</head><body class="bg-gray-50">
  <div class="max-w-3xl mx-auto p-6">
    <h2 class="text-xl font-semibold mb-3">Mock Escrow (Demo)</h2>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for cat, msg in messages %}
          <div class="p-2 rounded mb-2 {{ 'bg-green-100' if cat=='success' else 'bg-red-100' }}">{{ msg }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}
    <form method="post" class="bg-white p-4 rounded shadow space-y-3">
      <div><label class="block text-sm">User Email (must be registered)</label><input name="email" class="input"></div>
      <div><label class="block text-sm">Amount (INR)</label><input name="amount" type="number" step="0.01" class="input"></div>
      <div><button class="py-2 px-4 bg-indigo-600 text-white rounded">Create Mock Escrow</button></div>
    </form>

    <div class="mt-6 bg-white p-4 rounded shadow">
      <h3 class="font-semibold mb-2">Escrow Entries</h3>
      <table class="w-full text-sm">
        <thead><tr><th>Email</th><th>Amount</th><th>Status</th><th>Action</th></tr></thead>
        <tbody>
        {% for r in rows %}
          <tr>
            <td>{{ r[1] or 'Unknown' }}</td>
            <td>â‚¹ {{ r[2] }}</td>
            <td>{{ r[3] }}</td>
            <td>
              {% if r[3] != 'released' %}
                <a href="/escrow_release/{{ r[0] }}" class="text-indigo-600">Release</a>
              {% else %}
                -
              {% endif %}
            </td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="mt-3"><a href="/" class="text-sm text-indigo-600">Back</a></div>
  </div>
</body></html>
